pre-config:
  commands:
    - "target remote :11111"
    - "set pagination off"
config:
  timeout: 240
  collect:
    - name: "handling_model_torque_curve"
      points:
        - locspec: "*0x004fdac0"
          values:
            - name: "rpm"
              expr: "$edx"
              format: "%u"
        - locspec: "*0x004fdbec"
          values:
            - name: "torque"
              expr: "$st0"
              format: "%f"
    - name: "something_with_ang_vel"
      points:
        - locspec: "*0x00502f0c"
          values:
            - name: "velocity_local"
              expr: "*((float*)($eax + 0x4f4))"
              format: "%f"
            - name: "angular_velocity"
              expr: "*((float*)($eax + 0x5c))"
              format: "%f"
            - name: "gear"
              expr: "*((uint8_t*)($eax + 0x453))"
              format: "%u"
            - name: "inertia_inv"
              expr: "*((float*)($eax + 0x74))"
              format: "%f"
            - name: "mass"
              expr: "*((float*)($eax + 0x20))"
              format: "%f"
        - locspec: "*0x00502f31"
          values:
            - name: "result"
              expr: "$st0"
              format: "%f"
    - name: "steering_angle"
      points:
        - locspec: "*0x005014e0"
          values:
            - name: "linear_velocity_x"
              expr: "*((float*)($eax + 0x434))"
              format: "%f"
            - name: "linear_velocity_y"
              expr: "*((float*)($eax + 0x438))"
              format: "%f"
            - name: "linear_velocity_z"
              expr: "*((float*)($eax + 0x43c))"
              format: "%f"
            - name: "turn_angle"
              expr: "*((uint32_t*)($eax + 0x464))"
              format: "%d"
            - name: "handbrake"
              expr: "*((uint8_t*)($eax + 0x455))"
              format: "%u"
        - locspec: "*0x005017aa"
          values:
            - name: "result"
              expr: "$st0"
              format: "%f"
post-config:
  commands:
    - "continue"
